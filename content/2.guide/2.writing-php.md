---
title: Writing PHP
description: How to write php-code with Fusion
navigation:
    icon: false
---

Your PHP code must be contained inside of a single `<php></php>` block, anywhere inside of your Vue SFC.

It seems to make sense to place it as the first block in your file, since it's the first thing that will be executed when a request comes in. That's merely preference though, you're free to do as you please.

Your PHP code will be run within the context of a Laravel request. You have full access to the [container](https://laravel.com/docs/container){target="_blank"}, [facades](https://laravel.com/docs/facades){target="_blank"}, [helpers](https://laravel.com/docs/helpers){target="_blank"}, and everything else Laravel has to offer.

Regardless of the style of PHP you write, it must be valid PHP. If it isn't, Vite will show you an overlay with your errors.

## Best practices

There aren't a lot of best practices for writing PHP in Vue templates or JavaScript files, because that's never really been done before!

My recommendation is that you treat your PHP block as a "thin controller." I would recommend that you defer much of the business logic out to actions, service objects, or other classes in your application, and use the PHP block in your Vue template as a sort of routing layer into the rest of your application. Then, the PHP block in your Vue template only serves as an entry point from HTTP into the rest of your application.

## Procedural PHP

Procedural PHP is very a straightforward, top-to-bottom style of writing your PHP.

Fusion provides you a few important functions, which we will cover in detail elsewhere. For now, know that they are:
- `prop`
- `expose`
- `mount`

And that you may import them from the Fusion namespace:
```php
use function \Fusion\prop;

$podcast = prop();
```

You do not _have_ to import them, as they are available in your Vue files by default. They are worth importing though, if only for the sake of autocomplete.

## Class-based PHP

Class-based PHP will feel much more familiar to traditional PHP developers. To use class based PHP, you must define an anonymous class:
```php
new class 
{
    //
}
```
You may extend `Fusion\FusionPage` if you wish.
```php
new class extends \Fusion\FusionPage
{
    //
}
```
You may `return` the class, if that feels more logical to you:
```php
return new class
{
    //
}
```

## Code highlighting in PHP blocks
If you're using PhpStorm, you may configure a "Language Injection" to alert the editor that the language inside the `<php>` block is PHP.

In your preferences, look for **Editor > Language Injections**. In the top left you'll see a plus sign (+).

![logo](/php-storm-01.webp)

From that menu, choose "XML Tag Injection".

![logo](/php-storm-02.webp)

Then enter the following details.

![logo](/php-storm-03.webp)

This should make your editing experience much nicer. We'll work with the JetBrains team to make this step unnecessary.

As of now, we have no instructions on VSCode. Please stay tuned, we'll figure it out as quickly as we can.
