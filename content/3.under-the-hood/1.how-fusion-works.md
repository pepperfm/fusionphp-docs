---
title: How Fusion Works
description: Step-by-step guide about Fusion lifecycle.
navigation:
    icon: false
---

It may be helpful to understand the way that the Fusion lifecycle works, because it may demystify some of the apparent magic.

When you run `npm run dev` or `npm run build`, your Vite process starts. Fusion adds a Vite plugin to the stack that intercepts your single file component before the Vue plugin begins working on them. In our Vite plugin, we look for the PHP block, and if we find it, we extract it and hand it over to an Artisan command called `fusion:conform`.

Your PHP is then run through a series of parsers to make sure that it conforms to the Fusion standard. We do all of this at build time and then write the file to the disk so that we don't have to do this expensive reflection at runtime. After your PHP has been conformed, we run a second command called `fusion:shim`.

This writes a thin JavaScript file to the disk with some information about the names of your state properties and the names of your actions. Inside of this shim file there is a `useFusion` function. Every single view component gets a corresponding `useFusion` function. You do not have to import or even ever interact with the `useFusion` function, as we will inject it for you into your Vue component. If you want to have more control over importing your state and your methods, you are free to use the `useFusion` function yourself and handle that state in your `<script>` or `<script setup>` tags. You can find more details about that in the JavaScript section of this documentation.

Once the PHP class has been written to the disk, Fusion operates primarily in the standard Laravel request/response lifecycle. There is a single `FusionController` that will take the inbound requests and look up the correct class to route them to. The request is routed to that class that was extracted from your Vue template. If it is a page level request, i.e. you are loading the page for the first time, then an Inertia response is returned with the name of the component that should be shown on the page. If it is an action request, the response is just returned for the frontend to handle.
